!function t(n,e,r){function i(s,a){if(!e[s]){if(!n[s]){var p="function"==typeof require&&require;if(!a&&p)return p(s,!0);if(o)return o(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var c=e[s]={exports:{}};n[s][0].call(c.exports,function(t){var e=n[s][1][t];return i(e?e:t)},c,c.exports,t,n,e,r)}return e[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(t,n,e){var r=t("./lib/Intent"),i=t("./lib/Component"),o=t("./lib/Channel"),s=t("./lib/Radio");n.exports.Component=i,n.exports.component=function(t){return new i(t)},n.exports.Intent=r,n.exports.intent=function(t){return new r(t)},n.exports.Channel=o,n.exports.channel=function(t){return new o(t)},n.exports.Radio=s,n.exports.radio=function(){return new s}},{"./lib/Channel":2,"./lib/Component":3,"./lib/Intent":4,"./lib/Radio":6}],2:[function(t,n,e){function r(t){this.name=t||""}n.exports=r,r.prototype=[],r.prototype.constructor=r,r.prototype.broadcast=r.prototype.publish=function(){var t=this.slice(),n=t.length;if(!n)return!1;for(var e,r=null,i=-1;++i<n;)if(e=t[i],e.proxy&&(e=e.proxy),r=e.apply(null,arguments),null!=r)return r;return!1},r.prototype.subscribe=function(t){return"function"!=typeof t?(console.warn("Listener is not a function",t),this):(this.isSubscribed(t)||this.push(t),this)},r.prototype.unsubscribe=function(t){var n=this.indexOf(t);return~n&&this.splice(n,1),this},r.prototype.peek=function(t){var n=this;return t.proxy=function(){var e=t.apply(null,arguments);return n.unsubscribe(t),e},this.subscribe(t),this},r.prototype.isSubscribed=function(t){return!(!t||!~this.indexOf(t))},r.prototype.hasSubscribers=function(){return this.length>0},r.prototype.empty=function(){return this.splice(0),this}},{}],3:[function(t,n,e){function r(t,n){this.name=t||"",this.parent=n||null,this.active=!0,this._componentList=[],this._components={},this._services={},this._lazyClients={},this._intentFilters={},l.call(this)}function i(t){if(!t.parent)return t;for(;t.parent;)t=t.parent;return t}function o(t,n,e){var r=i(t);r.serviceExists(n)||(r._services[n]=e,s(t,n,e),r.relay("service",{name:n,handler:e}),r.relay("service:"+n,{name:n,handler:e}))}function s(t,n,e){var r=i(t),o=r._lazyClients[n];o&&o.length&&(o.forEach(function(t){e.apply(null,t)}),r._lazyClients[n]=[])}function a(t,n){function e(){for(;s+1==i&&o.length;)s=o.pop(),r=s[1],s=s[0],i=r.length}if(n(t)===!1)return!1;var r=t._componentList,i=r.length;if(!i)return!0;for(var o=[],s=-1;++s<i;){if(t=r[s],n(t)===!1)return!1;t._componentList.length?(o.push([s,r]),r=t._componentList,s=-1,i=r.length):e()}return!0}var p=(t("./Channel"),t("./Intent")),u=t("./Operation"),c=t("./Transmission"),l=t("./Radio");n.exports=r,r.prototype=Object.create(l.prototype),Object.defineProperty(r.prototype,"root",{get:function(){return i(this)}}),r.prototype.component=function(t){if(!t)return console.error("Can't define component from empty arguments"),null;if(this==t)return console.warn("Setting self as sub-component is not supported"),this;if(t instanceof r&&null!=t.parent)return console.warn("Transferring components is not supported"),t;if(this.isComponentDefined(t))return"string"==typeof t?this._components[t]:this._components[t.name];"string"==typeof t&&(t=new r(t,this)),t.parent=this,this._components[t.name]=t,this._componentList.push(t);var n,e=i(this),a=t._services,p=t._lazyClients;for(n in p)p.hasOwnProperty(n)&&(Array.isArray(e._lazyClients[n])?e._lazyClients[n]=e._lazyClients[n].concat(p[n].slice()):e._lazyClients[n]=p[n].slice(),this.serviceExists(n)&&s(t,n,this._services[n]));for(n in a)a.hasOwnProperty(n)&&o(e,n,a[n]);return t._services={},t._lazyClients={},t},r.prototype.isSubComponent=function(t){return null!=t&&this._components[t.name]==t},r.prototype.isComponentDefined=function(t){return null!=t&&("string"==typeof t?this._components.hasOwnProperty(t):this._components.hasOwnProperty(t.name))},r.prototype.deleteComponent=function(t){this.isComponentDefined(t)&&("string"==typeof t?(delete this._components[t],this._componentList=this._componentList.filter(function(n){return n.name!=t})):(delete this._components[t.name],this._componentList=this._componentList.filter(function(n){return n.name!=t.name})))},r.prototype.activate=function(){this.active=!0},r.prototype.deactivate=function(){this.active=!1},r.prototype.service=function(t,n){return o(this,t,n),this},r.prototype.serviceExists=r.prototype.serviceAvailable=function(t){return i(this)._services.hasOwnProperty(t)},r.prototype.deleteService=function(t){return delete i(this)._services[t]},r.prototype.invoke=function(t){var n=i(this)._services[t];if(!n)return null;var e=[].slice.call(arguments,1);return n.apply(null,e)},r.prototype.invokeLazy=r.prototype.lazy=function(t){var n=[].slice.call(arguments,1),e=i(this),r=e._services[t];if(!r){var o=e._lazyClients[t]||(e._lazyClients[t]=[]);return o.push(n),null}return r.apply(null,n)},r.prototype.whenAvailable=function(t,n){this.serviceAvailable(t)?n():this.attempt("service:"+t,function(){n()})},r.prototype.intent=function(t,n,e){var r=this._intentFilters[t];return r||(this._intentFilters[t]=[]),this._intentFilters[t].push(new u(n,e,!1)),this},r.prototype.attempt=function(t,n,e){var r=this._intentFilters[t];return r||(this._intentFilters[t]=[]),this._intentFilters[t].push(new u(n,e,!0)),this},r.prototype.relay=function(t,n,e){var r=n instanceof p?n:new p(n),i=new c(r,e);return a(this,function(n){var e=n._intentFilters[t];return Array.isArray(e)&&e.length&&e.some(function(t){return i.handle(t),r.interrupted}),!r.interrupted}),r.interrupted||i.attemptFinish(),r},r.prototype.relayGlobal=function(t,n,e){return r.prototype.relay.apply(i(this),arguments)},r.prototype.bubbleIntent=function(t,n,e){for(var r,i=new p(n),o=new c(i,e),s=this.parent;s;){if(r=s._intentFilters[t],Array.isArray(r)&&r.length&&r.some(function(t){return o.handle(t),i.interrupted}),i.interrupted)return i;s=s.parent}return o.attemptFinish(),i},r.prototype.triggerIntent=function(t,n){var e=this._intentFilters[t];if(Array.isArray(e)&&e.length){var r=n instanceof p?n:new p(n),i=new c(r);return e.some(function(t){return i.handle(t),r.interrupted}),r}return null},r.prototype.relayAsync=function(t,n,e){function r(t){!s.length||t||i.interrupted?e(t):o.handle(s.shift(),r)}var i=n instanceof p?n:new p(n),o=new c(i,e),s=[];return a(this,function(n){var e=n._intentFilters[t];Array.isArray(e)&&e.length&&(s=s.concat(e))}),r(),i},r.prototype.relayAsyncGlobal=function(t,n,e){return r.prototype.relayAsync.apply(i(this),arguments)}},{"./Channel":2,"./Intent":4,"./Operation":5,"./Radio":6,"./Transmission":7}],4:[function(t,n,e){function r(t){this.data=t,this.rejected=!1,this.interrupted=!1,this.state={}}var i=t("./Radio");n.exports=r,r.prototype=Object.create(i.prototype),r.prototype.reject=function(t,n){this.rejected=!0,this.state(t,n)},r.prototype.interrupt=function(t,n){this.interrupted||(this.interrupted=!0,"undefined"!=typeof n&&this.reject(t,n))},r.prototype.state=function(t,n){if("string"==typeof t&&"undefined"!=typeof n)this.state[t]=n;else for(var e in t)t.hasOwnProperty(e)&&(this.state[e]=t[e])}},{"./Radio":6}],5:[function(t,n,e){function r(t,n,e){this.handler=t,this.onEnd=n,this.oneTime=!!e}n.exports=r},{}],6:[function(t,n,e){function r(){this._channels=[]}var i=t("./Channel");n.exports=r,r.prototype.channel=function(t){return this._channels[t]||(this._channels[t]=new i(t))},r.prototype.channelExists=function(t){return!!t&&("string"==typeof t?this._channels.hasOwnProperty(t):this._channels.hasOwnProperty(t.name))},r.prototype.deleteChannel=function(t){return t instanceof i?delete this._channels[t.name]:delete this._channels[t]},r.prototype.hasSubscribers=function(t){return this.channelExists(t)&&this.channel(t).hasSubscribers()},r.prototype.isSubscribed=function(t,n){return this.channelExists(t)&&this.channel(t).isSubscribed(n)},r.prototype.publish=r.prototype.broadcast=function(t){if(this.channelExists(t)){t=this.channel(t);var n=[].slice.call(arguments,1);return t.broadcast.apply(t,n)}return!1},r.prototype.subscribe=function(t,n){return this.channel(t).subscribe(n),this},r.prototype.unsubscribe=function(t,n){return this.channelExists(t)&&this.channel(t).unsubscribe(n),this},r.prototype.peek=function(t,n){return this.channel(t).peek(n),this},r.prototype.emptyChannel=function(t){return this.channelExists(t)&&this.channel(t).empty(),this}},{"./Channel":2}],7:[function(t,n,e){function r(t,n){this._onEndCallbacks=[],this._intent=t,this._finalCallback=n,this.finished=!1}function i(t){t._onEndCallbacks=null,t._intent=null,t._finalCallback=null,t.finished=!0}function o(t){if(!t.finished){if(t.finished=!0,t._onEndCallbacks&&t._onEndCallbacks.length){var n=t._intent;t._onEndCallbacks.forEach(function(t){t(n)})}"function"==typeof t._finalCallback&&t._finalCallback(t._intent)}}n.exports=r,r.prototype.handle=function(t,n){var e=this;if(!e.finished){var r=e._intent;r.interrupted||(t.handler.call(null,r,n),r.interrupted?i(e):t.onEnd&&e._onEndCallbacks.push(t.onEnd))}},r.prototype.attemptFinish=function(){o(this)}},{}]},{},[1]);